<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owlhack</title>
    
    <script src="plotly-2.18.0.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="cloudflare.js"></script>
    <script src="index.js"></script>
    
   
</head>
<body>

   

    

        
    <a href="javascript:;" onmousedown="toggleDiv('mydiv');">Toggle Crime Categories</a>
        
    <div class="rand" id='mydivon'> </div>

    <div id = 'mydivoff' class ="rand">  </div>

    <div id = "mydiv3" class = "rand"> </div>

    <div id = "mydiv4" class = "rand"> </div>

    


    
   <script>

        let crime2023 = "https://raw.githubusercontent.com/hahuynh1/owlhack/main/Philly%20Crime%20Stat%202023.csv";
        let crime2022 =  "https://raw.githubusercontent.com/hahuynh1/owlhack/main/Philly%20Crime%20Stat%202022.csv";
        let theft;
        let assault;
        let other;
        let homicide; 

        //these are the other csv files

        /*longitude, latitude for universites
        Temple -39.9812° N, 75.1554° W 
        UPenn -39.9522° N, 75.1932° W
        LaSalle -40.0390° N, 75.1558° W
        Drexel - 39.9566° N, 75.1899° W

        */ 
        

        
        

            d3.csv(
            crime2022, 
            function(err, rows) {
                function unpack(rows, key) {
                    return rows.map(function(row) {
                        return row[key];
                    });
                }

                var data = [
                    {
                        type: "scattermapbox",
                        text: unpack(rows, "crime_category"),
                        lon: unpack(rows, "point_x"),
                        lat: unpack(rows, "point_y"),
                        marker: { color: "fuchsia", size: 4, opacity: 0.3 }
                    }
                ];

                var layout = {
                    dragmode: "zoom.0214",
                    mapbox: { style: "open-street-map", center: { lat: 39.9587, lon: -75.165 }, zoom: 11 },
                    margin: { r: 0, t: 0, b: 0, l: 0 }
                };

                Plotly.newPlot("mydivon", data, layout);
            }
        );

        d3.csv(
            crime2023, 
            function(err, rows) {
                function unpack(rows, key) {
                    return rows.map(function(row) {
                        return row[key];
                    });
                }

                var data = [
                    {
                        type: "scattermapbox",
                        text: unpack(rows, "crime_category"),
                        
                        lon: unpack(rows, "point_x"),
                        lat: unpack(rows, "point_y"),
                        marker: { color: "blue", size: 4, opacity: 0.3 }
                    }
                ];

                var layout = {
                    dragmode: "zoom.0214",
                    mapbox: { style: "open-street-map", center: { lat: 39.9587, lon: -75.165 }, zoom: 11 }, //the whole map
                    margin: { r: 0, t: 0, b: 0, l: 0 }
                };

                Plotly.newPlot("mydivoff", data, layout);
            }
        );


        d3.csv(
            crime2023, 
            function(err, rows) {
                function unpack(rows, key) {
                    return rows.map(function(row) {
                        return row[key];
                    });
                }

                var data = [
                    {
                        type: "scattermapbox",
                        text: unpack(rows, "crime_category"),
                        
                        lon: unpack(rows, "point_x"),
                        lat: unpack(rows, "point_y"),
                        marker: { color: "red", size: 10, opacity: 1 }
                    }
                ];

                var layout = {
                    dragmode: "zoom.0214",
                    mapbox: { style: "open-street-map", center: { lat: 39.9812, lon: -75.1554 }, zoom: 15 }, //temple University Temple -39.9812° N, 75.1554° W 

                    margin: { r: 0, t: 0, b: 0, l: 0 }
                };

                Plotly.newPlot("mydiv3", data, layout);
            }
        );

        d3.csv(
            crime2023, 
            function(err, rows) {
                function unpack(rows, key) {
                    return rows.map(function(row) {
                        return row[key];
                    });
                }

                var data = [
                    {
                        type: "scattermapbox",
                        text: unpack(rows, "crime_category"),
                        
                        lon: unpack(rows, "point_x"),
                        lat: unpack(rows, "point_y"),
                        marker: { color: "cyan", size: 10, opacity: 1 }
                    }
                ];

                var layout = {
                    dragmode: "zoom.0214",
                    mapbox: { style: "open-street-map", center: { lat: 39.9522, lon: -75.1932 }, zoom: 15 }, // UPenn -39.9522° N, 75.1932° W

                    margin: { r: 0, t: 0, b: 0, l: 0 }
                };

                Plotly.newPlot("mydiv4", data, layout);
            }
        );
       





    
   </script>



    
</body>
</html>